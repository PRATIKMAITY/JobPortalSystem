@{@model JobFrontEnd.Models.JobViewModel

ViewBag.Title = "Job Details";
}











<div class="page-heading header-text">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>
                    @Model.JobName
                </h1>


            </div>
        </div>
    </div>
</div>




<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>




<div class="services">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="tabs-content" style="display: block;">
                    <h4>Job Related Details</h4>
                    <div class="row">
                        <div class="col-lg-4">
                            <p>
                                <span>Job Category Name</span>

                                <br>

                                <strong style="color: #337ab7;">@Model.JobCategory.CategoryName</strong>
                            </p>

                        </div>
                        <div class="col-lg-4">

                            <p>
                                <span>Location</span>

                                <br>

                                <strong style="color: #337ab7;">
                                    @Model.JobLoc
                                </strong>
                            </p>
                        </div>
                        <div class="col-lg-4">
                            <p>
                                <span>Position</span>

                                <br>

                                <strong style="color: #337ab7;">
                                    @Model.JobPos
                                </strong>
                            </p>

                        </div>

                    </div>
                    <div class="row">
                        <div class="col-lg-4">
                            <p>
                                <span>Required Skill</span>

                                <br>

                                <strong style="color: #337ab7;">
                                    @Model.JobSkill
                                </strong>
                            </p>

                        </div>
                        <div class="col-lg-4">
                            <p>
                                <span>Minimum Qualification</span>

                                <br>

                                <strong style="color: #337ab7;">
                                    @Model.MinQulafication
                                </strong>
                            </p>
                        </div>
                        <div class="col-lg-4">
                            <p>
                                <span>Job Type</span>

                                <br>
                                <strong style="color: #337ab7;">
                                    @Model.JobType
                                </strong>
                            </p>
                        </div>
                        <div class="col-lg-4">
                            <p>
                                <span>Expected Salary</span>

                                <br>
                                <strong style="color: #337ab7;">
                                    @Model.ExpextedSalary
                                </strong>
                            </p>
                        </div>

                    </div>






                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-md-8">
                <div class="tabs-content" style="display: block;">
                    <h4>Description</h4>

                    <p>@Model.JobDesc1</p>

                </div>

                <br>
                <div class="tabs-content" style="display: block;">
                    <h4>About Employer</h4>
                    <p>@Model.company.CompanyDesc</p>
                </div>
            </div>

            <div class="col-md-4">
                <br>
                <div>
                    <img src="~/assets/images/product-1-720x480.jpg" alt="" class="img-fluid wc-image" style="width:360px; height:240px;">
                </div>
                <br>



                <button class="btn btn-primary" id="applybutton" style="display: block" data-toggle="modal" data-target="#exampleModal">Apply for this Job</button>

                <br>
                <div class="tabs-content">
                    <h4>Contact Details</h4>

                    <p>
                        <span>Name</span>

                        <br>

                        <strong>@Model.company.CompanyName</strong>
                    </p>

                    <p>
                        <span>Phone</span>

                        <br>

                        <strong>
                            <a href="tel:@Model.company.CompanyContactNo">@Model.company.CompanyContactNo</a>
                        </strong>
                    </p>


                    <p>
                        <span>Email</span>

                        <br>

                        <strong>
                            <a href="mailto: @Model.company.CompanyEmail">@Model.company.CompanyEmail</a>
                        </strong>
                    </p>
                </div>
            </div>
        </div>





        <br>
        <br>
        <br>
        <br>
    </div>
</div>

@section scripts{
    <script>
        var path = "https://localhost:44359/api/";


        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const jobid = urlParams.get('jobid')
        console.log(jobid);
      
        $(document).ready(function () {
            Checkapply();
        });


        function Checkapply() {
            var userapply = {};
            userapply.JobId = jobid;
            userapply.userid = "fe1490d6-3d43-42a9-8815-6afb02a8fc49";
            $.ajax({
                url: path + 'User/ApplyJobChecking',
                type: 'GET',
                data: userapply,
                success: function (response) {
                    console.log(response);

                    if (response == "Already Applied") {
                       
                        //document.getElementById("applybutton").style.display = 'none';
                        document.getElementById("applybutton").disabled = true;
                        var btn = document.getElementById("applybutton");
                        btn.value = 'my value'; // will just add a hidden value
                        btn.innerHTML = 'You have already applied for this job';
                    }
                    else {
                        
                    }

                },

                error: function () {
                    console.log('Error in Operation');
                },
            });
        };





    </script>
}

